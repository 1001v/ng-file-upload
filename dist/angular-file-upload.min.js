/*! 1.6.12 */
!function(){function a(a,b){window.XMLHttpRequest.prototype[a]=b(window.XMLHttpRequest.prototype[a])}function b(){var a=document.createElement("div");return"draggable"in a&&"ondrop"in a}!window.XMLHttpRequest||!window.FormData||window.FileAPI&&FileAPI.forceLoad||(a("setRequestHeader",function(a){return function(b,c){if("__setXHR_"===b){var d=c(this);d instanceof Function&&d(this)}else a.apply(this,arguments)}}),window.XMLHttpRequest.__isShim=!0);var c=angular.module("angularFileUpload",[]);c.service("$upload",["$http","$q","$timeout",function(a,b,c){function d(d){d.method=d.method||"POST",d.headers=d.headers||{},d.transformRequest=d.transformRequest||function(b,c){return window.ArrayBuffer&&b instanceof window.ArrayBuffer?b:a.defaults.transformRequest[0](b,c)};var e=b.defer(),f=e.promise;return window.XMLHttpRequest.__isShim&&(d.headers.__setXHR_=function(){return function(a){a&&(d.__XHR=a,d.xhrFn&&d.xhrFn(a),a.upload.addEventListener("progress",function(a){e.notify?e.notify(a):f.progress_fn&&c(function(){f.progress_fn(a)})},!1),a.upload.addEventListener("load",function(a){a.lengthComputable&&(e.notify?e.notify(a):f.progress_fn&&c(function(){f.progress_fn(a)}))},!1))}}),a(d).then(function(a){e.resolve(a)},function(a){e.reject(a)},function(a){e.notify(a)}),f.success=function(a){return f.then(function(b){a(b.data,b.status,b.headers,d)}),f},f.error=function(a){return f.then(null,function(b){a(b.data,b.status,b.headers,d)}),f},f.progress=function(a){return f.progress_fn=a,f.then(null,null,function(b){a(b)}),f},f.abort=function(){return d.__XHR&&c(function(){d.__XHR.abort()}),f},f.xhr=function(a){return d.xhrFn=function(b){return function(){b&&b.apply(f,arguments),a.apply(f,arguments)}}(d.xhrFn),f},f}this.upload=function(b){b.headers=b.headers||{},b.headers["Content-Type"]=void 0,b.transformRequest=b.transformRequest||a.defaults.transformRequest;var c=new FormData,e=b.transformRequest,f=b.data;return b.transformRequest=function(a,c){if(f)if(b.formDataAppender)for(var d in f){var g=f[d];b.formDataAppender(a,d,g)}else for(var d in f){var g=f[d];if("function"==typeof e)g=e(g,c);else for(var h=0;h<e.length;h++){var i=e[h];"function"==typeof i&&(g=i(g,c))}void 0!=g&&a.append(d,g)}if(null!=b.file){var j=b.fileFormDataName||"file";if("[object Array]"===Object.prototype.toString.call(b.file))for(var k="[object String]"===Object.prototype.toString.call(j),h=0;h<b.file.length;h++)a.append(k?j:j[h],b.file[h],b.fileName&&b.fileName[h]||b.file[h].name);else a.append(j,b.file,b.fileName||b.file.name)}return a},b.data=c,d(b)},this.http=function(a){return d(a)}}]),c.ngFileDirectiveFn=["$parse","$timeout",function(a,b){return{scope:!0,link:function(c,d,e){var f=a(e.ngFileSelect),g=e.ngFileModel,h=e.multiple;if("input"!==d[0].tagName.toLowerCase()||"file"!==(d.attr("type")&&d.attr("type").toLowerCase())){for(var i=angular.element('<input type="file">'),j=d[0].attributes,k=0;k<j.length;k++)"type"!==j[k].name.toLowerCase()&&i.attr(j[k].name,j[k].value);h&&i.attr("multiple","true"),i.css("width","1px").css("height","1px").css("opacity",0).css("position","absolute").css("filter","alpha(opacity=0)").css("padding",0).css("margin",0).css("overflow","hidden"),i.attr("__wrapper_for_parent_",!0),d.append(i),d[0].__file_click_fn_delegate_=function(){i[0].click()},d.bind("click",d[0].__file_click_fn_delegate_),d.css("overflow","hidden"),d=i}d.bind("change",function(a){var d,e,i=[];if(d=a.__files_||a.target.files,null!=d)for(e=0;e<d.length;e++)i.push(d.item(e));b(function(){if(f&&f(c,{$files:i,$event:a}),g){var b=i;h||(b=i[0]),c[g]=b,c.$parent&&(c.$parent[g]=b)}})})}}}],c.directive("ngFileSelect",c.ngFileDirectiveFn),c.directive("ngFileModel",c.ngFileDirectiveFn),c.directive("ngFileDropAvailable",["$parse","$timeout",function(a,c){return{scope:!0,link:function(a,d,e){var f=e.ngFileDropAvailable;/^([a-zA-Z0-9]+)$/.test(f)?a[f]=a.$parent[f]=b():b()&&c(function(){fn(a)})}}}]),c.directive("ngFileDrop",["$parse","$timeout","$location",function(a,c,d){return{scope:!0,link:function(e,f,g){function h(a){return/^[\000-\177]*$/.test(a)}function i(a,b,e,f){var g=[],i=a.dataTransfer.items;if(i&&i.length>0&&i[0].webkitGetAsEntry&&i[0].webkitGetAsEntry().isDirectory&&"file"!=d.protocol())for(var k=0;k<i.length;k++){var l=i[k].webkitGetAsEntry();if(l.isDirectory&&(e||f))return;if(null!=l&&(h(l.name)?j(g,l):i[k].webkitGetAsEntry().isDirectory||g.push(i[k].getAsFile())),f)break}else{var n=a.dataTransfer.files;if(null!=n)for(var k=0;k<n.length&&(g.push(n.item(k)),!f);k++);}!function o(a){c(function(){m?o(10):b(g)},a||0)}()}function j(a,b,c){if(null!=b)if(b.isDirectory){var d=b.createReader();m++,d.readEntries(function(d){for(var e=0;e<d.length;e++)j(a,d[e],(c?c:"")+b.name+"/");m--})}else m++,b.file(function(b){m--,b._relativePath=(c?c:"")+b.name,a.push(b)})}if(b()){var k=null;f[0].addEventListener("dragover",function(b){if(b.preventDefault(),c.cancel(k),!f[0].__drag_over_class_)if(g.ngFileDragOverClass&&g.ngFileDragOverClass.search(/\) *$/)>-1){var d=a(g.ngFileDragOverClass)(e,{$event:b});f[0].__drag_over_class_=d}else f[0].__drag_over_class_=g.ngFileDragOverClass||"dragover";f.addClass(f[0].__drag_over_class_)},!1),f[0].addEventListener("dragenter",function(a){a.preventDefault()},!1),f[0].addEventListener("dragleave",function(){k=c(function(){f.removeClass(f[0].__drag_over_class_),f[0].__drag_over_class_=null},g.ngFileDragOverDelay||1)},!1);var l=a(g.ngFileDrop);f[0].addEventListener("drop",function(a){a.preventDefault(),f.removeClass(f[0].__drag_over_class_),f[0].__drag_over_class_=null,i(a,function(b){l(e,{$files:b,$event:a})},"true"==e[g.ngFileDropDisallowDir],"false"==g.multiple)},!1);var m=0}}}}])}();