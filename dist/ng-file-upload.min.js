/*! 6.2.1 */
!window.XMLHttpRequest||window.FileAPI&&FileAPI.shouldLoad||(window.XMLHttpRequest.prototype.setRequestHeader=function(a){return function(b,c){if("__setXHR_"===b){var d=c(this);d instanceof Function&&d(this)}else a.apply(this,arguments)}}(window.XMLHttpRequest.prototype.setRequestHeader));var ngFileUpload=angular.module("ngFileUpload",[]);ngFileUpload.version="6.2.1",ngFileUpload.defaults={},ngFileUpload.service("UploadBase",["$http","$q","$timeout",function(a,b,c){function d(d){d.method=d.method||"POST",d.headers=d.headers||{};var e=b.defer(),f=e.promise;return d.headers.__setXHR_=function(){return function(a){a&&(d.__XHR=a,d.xhrFn&&d.xhrFn(a),a.upload.addEventListener("progress",function(a){a.config=d,e.notify?e.notify(a):f.progressFunc&&c(function(){f.progressFunc(a)})},!1),a.upload.addEventListener("load",function(a){a.lengthComputable&&(a.config=d,e.notify?e.notify(a):f.progressFunc&&c(function(){f.progressFunc(a)}))},!1))}},a(d).then(function(a){e.resolve(a)},function(a){e.reject(a)},function(a){e.notify(a)}),f.success=function(a){return f.then(function(b){a(b.data,b.status,b.headers,d)}),f},f.error=function(a){return f.then(null,function(b){a(b.data,b.status,b.headers,d)}),f},f.progress=function(a){return f.progressFunc=a,f.then(null,null,function(b){a(b)}),f},f.abort=function(){return d.__XHR&&c(function(){d.__XHR.abort()}),f},f.xhr=function(a){return d.xhrFn=function(b){return function(){b&&b.apply(f,arguments),a.apply(f,arguments)}}(d.xhrFn),f},f}this.upload=function(a){function b(c,d,e){if(void 0!==d)if(angular.isDate(d)&&(d=d.toISOString()),angular.isString(d))c.append(e,d);else if("form"===a.sendFieldsAs)if(angular.isObject(d))for(var f in d)d.hasOwnProperty(f)&&b(c,d[f],e+"["+f+"]");else c.append(e,d);else d=angular.isString(d)?d:JSON.stringify(d),"json-blob"===a.sendFieldsAs?c.append(e,new Blob([d],{type:"application/json"})):c.append(e,d)}return a.headers=a.headers||{},a.headers["Content-Type"]=void 0,a.transformRequest=a.transformRequest?angular.isArray(a.transformRequest)?a.transformRequest:[a.transformRequest]:[],a.transformRequest.push(function(c){var d,e=new FormData,f={};for(d in a.fields)a.fields.hasOwnProperty(d)&&(f[d]=a.fields[d]);c&&(f.data=c);for(d in f)if(f.hasOwnProperty(d)){var g=f[d];a.formDataAppender?a.formDataAppender(e,d,g):b(e,g,d)}if(null!=a.file){var h=a.fileFormDataName||"file";if(angular.isArray(a.file))for(var i=angular.isString(h),j=0;j<a.file.length;j++)e.append(i?h:h[j],a.file[j],a.fileName&&a.fileName[j]||a.file[j].name);else e.append(h,a.file,a.fileName||a.file.name)}return e}),d(a)},this.http=function(b){return b.transformRequest=b.transformRequest||function(b){return window.ArrayBuffer&&b instanceof window.ArrayBuffer||b instanceof Blob?b:a.defaults.transformRequest[0](arguments)},d(b)},this.setDefaults=function(a){ngFileUpload.defaults=a||{}},ngFileUpload.Upload=this}]),function(){function a(a,e,f,g,h,i,j){function k(){return"input"===e[0].tagName.toLowerCase()&&f.type&&"file"===f.type.toLowerCase()}function l(b){var c=b.__files_||b.target&&b.target.files;e.attr("__ngf_has_val_",!0);var j=c,k=[];ngFileUpload.updateModel(h,i,a,g,f,d(f,"ngfChange")||d(f,"ngfSelect"),j,k,b),0===j.length&&(b.target.value=j)}function m(b){d(f,"ngfMultiple")&&b.attr("multiple",h(d(f,"ngfMultiple"))(a)),d(f,"ngfCapture")&&b.attr("capture",h(d(f,"ngfCapture"))(a)),d(f,"accept")&&b.attr("accept",d(f,"accept"));for(var c=0;c<e[0].attributes.length;c++){var g=e[0].attributes[c];(k()&&"type"!==g.name||"type"!==g.name&&"class"!==g.name&&"id"!==g.name&&"style"!==g.name)&&((null==g.value||""===g.value)&&("required"===g.name&&(g.value="required"),"multiple"===g.name&&(g.value="multiple")),b.attr(g.name,g.value))}}function n(b,c){if(!c&&(b||k()))return e.$$ngfRefElem||e;if(e.$$ngfProgramClick)return e;var d=angular.element('<input type="file">');return m(d),k()?(e.replaceWith(d),e=d,d.attr("__ngf_gen__",!0),j(e)(a)):(d.css("visibility","hidden").css("position","absolute").css("overflow","hidden").css("width","0px").css("height","0px").css("border","none").css("margin","0px").css("padding","0px").attr("tabindex","-1"),e.$$ngfRefElem&&e.$$ngfRefElem.remove(),e.$$ngfRefElem=d,document.body.appendChild(d[0])),d}function o(b){e.attr("__ngf_has_val_")&&(ngFileUpload.updateModel(h,i,a,g,f,d(f,"ngfChange")||d(f,"ngfSelect"),[],[],b,!0),e.removeAttr("__ngf_has_val_"))}function p(c){function g(a){a&&!e.$$ngfProgramClick&&(e.$$ngfProgramClick=!0,t[0].click(),i(function(){delete e.$$ngfProgramClick},500)),!k()&&a||!s||e.bind("click touchstart touchend",p)}if(e.attr("disabled")||q)return!1;if(null!=c){var j=c.changedTouches||c.originalEvent&&c.originalEvent.changedTouches;if("touchstart"===c.type)return r=j?j[0].clientY:0,!0;if(c.stopPropagation(),c.preventDefault(),"touchend"===c.type){var m=j?j[0].clientY:0;if(Math.abs(m-r)>20)return!1}}var s=h(d(f,"ngfResetOnClick"))(a)!==!1,t=n(c,s);return t&&((!c||s)&&t.bind("change",l),c&&s&&h(d(f,"ngfResetModelOnClick"))(a)!==!1&&o(c),b(navigator.userAgent)?setTimeout(function(){g(c)},0):g(c)),!1}if(c.registerValidators(g,a,function(b){return h(d(f,b))(a)}),!e.attr("__ngf_gen__")){a.$on("$destroy",function(){e.$$ngfRefElem&&e.$$ngfRefElem.remove()});var q=!1;f.$observe("ngfSelect",function(a){a===!1?e.attr("disabled","disabled"):a===!0&&e.removeAttr("disabled")});var r=0;window.FileAPI&&window.FileAPI.ngfFixIE?window.FileAPI.ngfFixIE(e,n,m,l):p()}}function b(a){var b=a.match(/Android[^\d]*(\d+)\.(\d+)/);if(b&&b.length>2){var c=ngFileUpload.defaults.androidFixMinorVersion||4;return parseInt(b[1])<4||parseInt(b[1])===c&&parseInt(b[2])<c}return-1===a.indexOf("Chrome")&&/.*Windows.*Safari.*/.test(a)}ngFileUpload.getAttrWithDefaults=function(a,b){return null!=a[b]?a[b]:null==ngFileUpload.defaults[b]?ngFileUpload.defaults[b]:ngFileUpload.defaults[b].toString()};var c,d=ngFileUpload.getAttrWithDefaults;ngFileUpload.directive("ngfSelect",["$parse","$timeout","$compile","Upload",function(b,d,e,f){return c=f,{restrict:"AEC",require:"?ngModel",link:function(c,f,g,h){a(c,f,g,h,b,d,e)}}}]),ngFileUpload.updateModel=function(a,b,c,e,f,g,h,i,j,k){function l(){var k=a(d(f,"ngfKeep"))(c);if(k===!0){var l=(e.$modelValue||[]).slice(0);if(h&&h.length)if(a(d(f,"ngfKeepDistinct"))(c)===!0){for(var m=l.length,n=0;n<h.length;n++){for(var o=0;m>o&&h[n].name!==l[o].name;o++);o===m&&l.push(h[n])}h=l}else h=l.concat(h);else h=l}var p=h&&h.length?h[0]:null;if(e){var q=!a(d(f,"ngfMultiple"))(c)&&!d(f,"multiple")&&!k;b(function(){a(d(f,"ngModel")).assign(c,q?p:h)})}var r=d(f,"ngfModel");r&&a(r).assign(c,h),d(f,"ngModelRejected")&&a(d(f,"ngModelRejected")).assign(c,i),g&&a(g)(c,{$files:h,$file:p,$rejectedFiles:i,$event:j})}k?l():b(function(){l()})}}(),function(){ngFileUpload.service("UploadDataUrl",["UploadBase","$timeout","$q",function(a,b,c){return a.dataUrl=function(a,d){var e;return a.dataUrl?(e=c.defer(),b(function(){e.resolve(a.dataUrl)}),e.promise):a.$dataUrlPromise?a.$dataUrlPromise:(e=c.defer(),b(function(){if(window.FileReader&&a&&(!window.FileAPI||-1===navigator.userAgent.indexOf("MSIE 8")||a.size<2e4)&&(!window.FileAPI||-1===navigator.userAgent.indexOf("MSIE 9")||a.size<4e6)){var c=window.URL||window.webkitURL;if(c&&c.createObjectURL&&!d){var f;try{f=c.createObjectURL(a)}catch(g){e.resolve("")}f&&e.resolve(f)}else{var h=new FileReader;h.readAsDataURL(a),h.onload=function(a){b(function(){e.resolve(a.target.result)})}}}else e.resolve(null)}),a.$dataUrlPromise=e.promise,a.$dataUrlPromise)},a}]),ngFileUpload.directive("ngfSrc",["$parse","$compile","$timeout",function(a,b,c){return{restrict:"AE",link:function(d,e,f){c(function(){e.attr("src","{{("+f.ngfSrc+") | ngfDataUrl"+(a(f.ngfNoObjectUrl)(d)===!0?":true":"")+"}}"),f.$set("ngfSrc",null),b(e)(d)})}}}]),ngFileUpload.directive("ngfBackground",["$parse","$compile","$timeout",function(a,b,c){return{restrict:"AE",link:function(d,e,f){c(function(){e.attr("style",e.attr("style")+";background-image:url('{{("+f.ngfBackground+") | ngfDataUrl"+(a(f.ngfNoObjectUrl)(d)===!0?":true":"")+"}}')"),f.$set("ngfBackground",null),b(e)(d)})}}}]),ngFileUpload.config(["$compileProvider",function(a){a.imgSrcSanitizationWhitelist&&a.imgSrcSanitizationWhitelist(/^\s*(https?|ftp|local|file|data|blob):/),a.aHrefSanitizationWhitelist&&a.aHrefSanitizationWhitelist(/^\s*(https?|ftp|local|file|data|blob):/)}]),ngFileUpload.filter("ngfDataUrl",["UploadDataUrl","$sce",function(a,b){return function(c,d){return angular.isString(c)?b.trustAsResourceUrl(c):c&&!c.dataUrl?(void 0===c.dataUrl&&angular.isObject(c)&&(c.dataUrl=null,a.dataUrl(c,function(a,b){b.dataUrl=a},d)),""):(c&&c.dataUrl?b.trustAsResourceUrl(c.dataUrl):c)||""}}])}(),function(){function a(b){if(b.length>2&&"/"===b[0]&&"/"===b[b.length-1])return b.substring(1,b.length-1);var c=b.split(","),d="";if(c.length>1)for(var e=0;e<c.length;e++)d+="("+a(c[e])+")",e<c.length-1&&(d+="|");else 0===b.indexOf(".")&&(b="*"+b),d="^"+b.replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\-]","g"),"\\$&")+"$",d=d.replace(/\\\*/g,".*").replace(/\\\?/g,".");return d}function b(a){if(angular.isString(a)){if(a.search(/kb/i)===a.length-2)return parseFloat(1e3*a.substring(0,a.length-2));if(a.search(/mb/i)===a.length-2)return parseFloat(1e6*a.substring(0,a.length-2));if(a.search(/gb/i)===a.length-2)return parseFloat(1e9*a.substring(0,a.length-2));if(a.search(/b/i)===a.length-1)return parseFloat(a.substring(0,a.length-1));if(a.search(/s/i)===a.length-1)return parseFloat(a.substring(0,a.length-1));if(a.search(/m/i)===a.length-1)return parseFloat(60*a.substring(0,a.length-1));if(a.search(/h/i)===a.length-1)return parseFloat(3600*a.substring(0,a.length-1))}return a}ngFileUpload.service("Upload",["UploadDataUrl","$q","$timeout",function(c,d,e){return c.registerValidators=function(c,e,f){function g(a,b,d){var e=f("ngf"+a[0].toUpperCase()+a.substr(1))||b;e&&(c.$validators[a]=function(b){var c=!0;return b&&angular.forEach(b.length?b:[b],function(b){return d(b,e)?void 0:(b.$error=a,b.$errorParam=e,c=!1,!1)}),c})}function h(a,b,e,g){var h=f("ngf"+a[0].toUpperCase()+a.substr(1))||b;h&&(c.$asyncValidators[a]=function(b){if(b){var c=d.defer(),f=0,i=!1;angular.forEach(b.length?b:[b],function(d){e(d).then(function(b){g(b,h)||(d.$error=a,d.$errorParam=h,i=!0)},function(){d.$error=a,d.$errorParam=h,i=!0})["finally"](function(){f++,f===b.length&&(i?c.reject():c.resolve())})})}})}var i=f("ngfValidate")||{};g("pattern",i.pattern,function(b,c){var d=new RegExp(a(c),"gi");return null!=b.type&&d.test(b.type.toLowerCase())||null!=b.name&&d.test(b.name.toLowerCase())}),g("minSize",i.size&&i.size.min,function(a,c){return a.size>=b(c)}),g("maxSize",i.size&&i.size.max,function(a,c){return a.size<=b(c)}),h("maxHeight",i.height&&i.height.max,this.imageDimensions,function(a,b){return a.height<=b}),h("minHeight",i.height&&i.height.min,this.imageDimensions,function(a,b){return a.height>=b}),h("maxWidth",i.height&&i.width.max,this.imageDimensions,function(a,b){return a.width<=b}),h("minWidth",i.height&&i.width.min,this.imageDimensions,function(a,b){return a.width>=b}),h("maxDuration",i.height&&i.duration.max,this.mediaDuration,function(a,c){return a<=b(c)}),h("minDuration",i.height&&i.duration.min,this.mediaDuration,function(a,c){return a>=b(c)})},c.imageDimensions=function(a){var b;return a.width&&a.height?(b=d.defer(),e(function(){b.resolve({width:a.width,height:a.height})}),b.promise):a.$ngfDimensionsPromise?a.$ngfDimensionsPromise:(b=d.defer(),e(function(){return 0!==a.type.indexOf("image")?void b.reject("not image"):void c.dataUrl(a).then(function(c){var d=angular.element("<img>").attr("src",c).css("visibility","none").css("position","fixed");d.on("load",function(){var c=d[0].clientWidth,e=d[0].clientHeight;d.remove(),a.width=c,a.height=e,delete a.$ngfDimensionsPromise,b.resolve({width:c,height:e})}),d.on("error",function(){d.remove(),delete a.$ngfDimensionsPromise,b.reject("load error")}),angular.element(document.body).append(d)},function(){delete a.$ngfDimensionsPromise,b.reject("load error")})}),a.$ngfDimensionsPromise=b.promise,a.$ngfDimensionsPromise)},c.mediaDuration=function(a){var b;return a.duration?(b=d.defer(),e(function(){b.resolve(a.duration)}),b.promise):a.$ngfDurationsPromise?a.$ngfDurationsPromise:(b=d.defer(),e(function(){return 0===a.type.indexOf("audio")||0===a.type.indexOf("video")?void b.reject("not image"):void c.dataUrl(a).then(function(c){var d=angular.element(0===a.type.indexOf("audio")?"<audio>":"<video>").attr("src",c).css("visibility","none").css("position","fixed");d.on("loadedmetadata",function(){var c=d[0].duration;a.duration=c,delete a.$ngfDurationsPromise,d.remove(),b.resolve(c)}),d.on("error",function(){d.remove(),delete a.$ngfDurationsPromise,b.reject("load error")}),angular.element(document.body).append(d)},function(){delete a.$ngfDurationsPromise,b.reject("load error")})}),a.$ngfDurationsPromise=b.promise,a.$ngfDurationsPromise)},c}])}(),function(){function a(a,e,f,g,h,i,j){function k(a,b,e,f){var g=e.dataTransfer.items,i=[];if(null!=g)for(var j=0;j<g.length;j++)("file"===g[j].kind||""===g[j].kind)&&i.push(g[j]);c.validate(a,h,b,i,e,function(c,g){var i=h(d(b,"ngfDragOverClass"))(a,{$event:e});i&&(i.delay&&(r=i.delay),i.accept&&(i=g&&g.length?i.reject:i.accept)),f(i||d(b,"ngfDragOverClass")||"dragover")})}function l(b,d,e,g){function k(a,b,c){if(null!=b)if(b.isDirectory){var d=(c||"")+b.name;a.push({name:b.name,type:"directory",path:d});var e=b.createReader(),f=[];m++;var g=function(){e.readEntries(function(d){try{if(d.length)f=f.concat(Array.prototype.slice.call(d||[],0)),g();else{for(var e=0;e<f.length;e++)k(a,f[e],(c?c:"")+b.name+"/");m--}}catch(h){m--,console.error(h)}},function(){m--})};g()}else m++,b.file(function(b){try{m--,b.path=(c?c:"")+b.name,a.push(b)}catch(d){m--,console.error(d)}},function(){m--})}var l=[],m=0,n=b.dataTransfer.items;if(n&&n.length>0&&"file"!==j.protocol())for(var o=0;o<n.length;o++){if(n[o].webkitGetAsEntry&&n[o].webkitGetAsEntry()&&n[o].webkitGetAsEntry().isDirectory){var p=n[o].webkitGetAsEntry();if(p.isDirectory&&!e)continue;null!=p&&k(l,p)}else{var q=n[o].getAsFile();null!=q&&l.push(q)}if(!g&&l.length>0)break}else{var r=b.dataTransfer.files;if(null!=r)for(var s=0;s<r.length&&(l.push(r.item(s)),g||!(l.length>0));s++);}var t=0;!function u(e){i(function(){if(m)10*t++<2e4&&u(10);else{if(!g&&l.length>1){for(o=0;"directory"===l[o].type;)o++;l=[l[o]]}c.validate(a,h,f,l,b,function(a,b){d(a,b)})}},e||0)}()}var m=b();if(d(f,"dropAvailable")&&i(function(){a[d(f,"dropAvailable")]?a[d(f,"dropAvailable")].value=m:a[d(f,"dropAvailable")]=m}),!m)return void(h(d(f,"ngfHideOnDropNotAvailable"))(a)===!0&&e.css("display","none"));var n=!1;f.$observe("ngfDrop",function(a){a===!1?e.attr("disabled","disabled"):a===!0&&e.removeAttr("disabled")});var o,p=null,q=h(d(f,"ngfStopPropagation")),r=1;e[0].addEventListener("dragover",function(b){if(!e.attr("disabled")&&!n){if(b.preventDefault(),q(a)&&b.stopPropagation(),navigator.userAgent.indexOf("Chrome")>-1){var c=b.dataTransfer.effectAllowed;b.dataTransfer.dropEffect="move"===c||"linkMove"===c?"move":"copy"}i.cancel(p),o||(o="C",k(a,f,b,function(a){o=a,e.addClass(o)}))}},!1),e[0].addEventListener("dragenter",function(b){e.attr("disabled")||n||(b.preventDefault(),q(a)&&b.stopPropagation())},!1),e[0].addEventListener("dragleave",function(){e.attr("disabled")||n||(p=i(function(){e.removeClass(o),o=null},r||1))},!1),e[0].addEventListener("drop",function(b){e.attr("disabled")||n||(b.preventDefault(),q(a)&&b.stopPropagation(),e.removeClass(o),o=null,l(b,function(c,e){ngFileUpload.updateModel(h,i,a,g,f,d(f,"ngfChange")||d(f,"ngfDrop"),c,e,b)},h(d(f,"ngfAllowDir"))(a)!==!1,d(f,"multiple")||h(d(f,"ngfMultiple"))(a)))},!1),e[0].addEventListener("paste",function(b){if(!e.attr("disabled")&&!n){var j=[],k=b.clipboardData||b.originalEvent.clipboardData;if(k&&k.items){for(var l=0;l<k.items.length;l++)-1!==k.items[l].type.indexOf("image")&&j.push(k.items[l].getAsFile());c.validate(a,h,f,j,b,function(c,e){ngFileUpload.updateModel(h,i,a,g,f,d(f,"ngfChange")||d(f,"ngfDrop"),c,e,b)})}}},!1)}function b(){var a=document.createElement("div");return"draggable"in a&&"ondrop"in a}var c,d=ngFileUpload.getAttrWithDefaults;ngFileUpload.directive("ngfDrop",["$parse","$timeout","$location","Upload",function(b,d,e,f){return c=f,{restrict:"AEC",require:"?ngModel",link:function(c,f,g,h){a(c,f,g,h,b,d,e)}}}]),ngFileUpload.directive("ngfNoFileDrop",function(){return function(a,c){b()&&c.css("display","none")}}),ngFileUpload.directive("ngfDropAvailable",["$parse","$timeout",function(a,c){return function(e,f,g){if(b()){var h=a(d(g,"ngfDropAvailable"));c(function(){h(e),h.assign&&h.assign(e,!0)})}}}])}();